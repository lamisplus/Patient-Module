(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{666:function(e,t,a){e.exports=a(876)},671:function(e,t,a){},874:function(e,t,a){},876:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l),i=(a(671),a(67)),o=a(17),s=a.n(o),m=a(32),u=a(9),d=a(51),p=a.n(d),f=a(619),E=a(531),b=a(943),g=a(944),h=a(945),v=a(946),O=a(480),N=a(218),y=a(329),j=a(621),x=a(65),S=a(586),w=a(527),k=a(529),I=a(530),C=a(321),T=a.n(C),P=a(590),A=a.n(P),D=a(591),R=a.n(D),B=a(53),z=(a(343),a(447),a(116)),F=a(588),_=a(71),H=new URLSearchParams(window.location.search).get("jwt"),M="/api/v1/";N.b.add(y.a,y.b,y.c,y.d);var q=Object(w.a)(function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:300},button:{margin:e.spacing(1)},root:{flexGrow:1,maxWidth:752},demo:{backgroundColor:e.palette.background.default},inline:{display:"inline"}}}),V=x.c().shape({dateOfRegistration:x.a().required(),hospitalNumber:x.d().required(),firstName:x.d().required(),middleName:x.d().nullable(),lastName:x.d().required(),sex:x.b().required(),employmentStatus:x.b().required(),highestQualification:x.b().required(),maritalStatus:x.b().required(),dob:x.a().required(),dateOfBirth:x.d().required(),age:x.b(),pnumber:x.d().required(),altPhonenumber:x.d().nullable(),email:x.d().nullable(),address:x.d().nullable(),landmark:x.d().nullable(),countryId:x.b().required(),stateId:x.b().required(),district:x.b().nullable()}),G=function(e){var t,a=Object(_.e)({resolver:Object(j.a)(V)}),l=a.register,c=a.setValue,o=a.getValues,d=a.setError,N=a.handleSubmit,y=a.formState.errors,x=Object(n.useState)((new Date).toISOString().substr(0,10).replace("T"," ")),w=Object(u.a)(x,2),C=w[0],P=(w[1],Object(n.useState)([])),D=Object(u.a)(P,2),G=D[0],L=D[1],W=Object(n.useState)(!1),Q=Object(u.a)(W,2),Y=Q[0],U=(Q[1],Object(n.useState)(!0)),K=Object(u.a)(U,2),J=K[0],X=K[1],Z=Object(n.useState)(!1),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(null),ne=Object(u.a)(ae,2),re=ne[0],le=ne[1],ce=Object(n.useState)([]),ie=Object(u.a)(ce,2),oe=ie[0],se=ie[1],me=Object(n.useState)([]),ue=Object(u.a)(me,2),de=ue[0],pe=ue[1],fe=Object(n.useState)([]),Ee=Object(u.a)(fe,2),be=Ee[0],ge=Ee[1],he=Object(n.useState)([]),ve=Object(u.a)(he,2),Oe=ve[0],Ne=ve[1],ye=Object(n.useState)([]),je=Object(u.a)(ye,2),xe=je[0],Se=je[1],we=Object(n.useState)([]),ke=Object(u.a)(we,2),Ie=ke[0],Ce=ke[1],Te=Object(n.useState)([]),Pe=Object(u.a)(Te,2),Ae=Pe[0],De=Pe[1],Re=Object(n.useState)([]),Be=Object(u.a)(Re,2),ze=Be[0],Fe=Be[1],_e=e.location&&e.location.state?e.location.state.user:null,He=q(),Me=Object(i.g)(),qe=Object(i.h)().state;t=qe?qe.patientId:null;var Ve=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var a,n,r,l,i,o,m,u,d,E,b,g,h,v,O,N,y;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=46;break}return e.next=3,p.a.get("".concat(M,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 3:if(a=e.sent,n=a.data,r=n.contact?n.contact:[],L(r.contact),l=n.identifier,i=n.address,o=n.contactPoint,m=l.identifier.find(function(e){return"HospitalNumber"==e.type}),u=o.contactPoint.find(function(e){return"phone"==e.type}),d=o.contactPoint.find(function(e){return"email"==e.type}),E=o.contactPoint.find(function(e){return"altphone"==e.type}),b=i&&i.address&&i.address.length>0?i.address[0]:null,g=n.gender,h=n.employmentStatus,v=n.education,O=n.maritalStatus,c("dateOfRegistration",n.dateOfRegistration),c("firstName",n.firstName),c("middleName",n.otherName),c("lastName",n.surname),c("hospitalNumber",m?m.value:""),c("maritalStatus",O.id),c("employmentStatus",h.id),c("sex",g.id),c("highestQualification",v.id),c("dob",Object(f.a)(new Date(n.dateOfBirth),"yyyy-MM-dd")),!b){e.next=43;break}return c("countryId",b.countryId),e.next=33,Je(b.countryId);case 33:return N=e.sent,De(N),c("stateId",b.stateId),e.next=38,Je(b.stateId);case 38:y=e.sent,Fe(y),c("district",b.district),c("address",b.city),c("landmark",b.line[0]);case 43:c("pnumber",u?u.value:null),c("email",d?d.value:null),c("altPhonenumber",E?E.value:null);case 46:case"end":return e.stop()}},e)})),[]),Ge=function(){var e=Object(m.a)(s.a.mark(function e(a){var n,r,l,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n={active:!0,address:[{city:a.address,countryId:a.countryId,district:a.district,line:[a.landmark],organisationUnitId:0,postalCode:"",stateId:a.stateId}],contact:G,contactPoint:[],dateOfBirth:new Date(a.dob),deceased:!1,deceasedDateTime:null,firstName:a.firstName,genderId:a.sex,identifier:[{assignerId:1,type:"HospitalNumber",value:a.hospitalNumber}],otherName:a.middleName,maritalStatusId:a.maritalStatus,surname:a.lastName,educationId:a.highestQualification,employmentStatusId:a.employmentStatus,dateOfRegistration:a.dateOfRegistration,isDateOfBirthEstimated:"Actual"!=a.dateOfBirth},r={type:"phone",value:a.pnumber},a.email&&(l={type:"email",value:a.email},n.contactPoint.push(l)),a.altPhonenumber&&(c={type:"altphone",value:a.altPhonenumber},n.contactPoint.push(c)),n.contactPoint.push(r),!t){e.next=13;break}return n.id=null,e.next=10,p.a.put("".concat(M,"patient/").concat(t),n,{headers:{Authorization:"Bearer ".concat(H)}});case 10:e.sent,e.next=16;break;case 13:return e.next=15,p.a.post("".concat(M,"patient"),n,{headers:{Authorization:"Bearer ".concat(H)}});case 15:e.sent;case 16:B.b.success("Patient Register successful"),Me.push("/"),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),B.b.error("An error occured while registering a patient !",{position:B.b.POSITION.TOP_RIGHT});case 24:case"end":return e.stop()}},e,null,[[0,20]])}));return function(t){return e.apply(this,arguments)}}(),Le=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"application-codesets/v2/GENDER"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,se(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.b.error("An error occured while fetching gender codesets !",{position:B.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),We=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"application-codesets/v2/MARITAL_STATUS"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,pe(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.b.error("An error occured while fetching marital codesets !",{position:B.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),Qe=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"application-codesets/v2/EDUCATION"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,ge(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.b.error("An error occured while fetching education codesets !",{position:B.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),Ye=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"application-codesets/v2/OCCUPATION"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Ne(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.b.error("An error occured while fetching occupation codesets !",{position:B.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),Ue=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"application-codesets/v2/RELATIONSHIP"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,Se(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),B.b.error("An error occured while fetching relationship codesets !",{position:B.b.POSITION.TOP_RIGHT});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),Ke=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(M,"organisation-units/parent-organisation-units/0"),{headers:{Authorization:"Bearer ".concat(H)}});case 2:t=e.sent,Ce(t.data);case 4:case"end":return e.stop()}},e)})),[]),Je=function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(M,"organisation-units/parent-organisation-units/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,Je(t.target.value);case 3:a=e.sent,De(a),e.next=8;break;case 7:De([]);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=7;break}return e.next=3,Je(t.target.value);case 3:a=e.sent,Fe(a),e.next=8;break;case 7:Fe([]);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),$e=function(e){"Actual"==e.target.value?X(!0):"Estimated"==e.target.value&&X(!1)};Object(n.useEffect)(function(){Le(),We(),Qe(),Ye(),Ue(),Ke(),Ve()},[Le,We,Qe,Ye,Ue,Ke,Ve]);var et=null,tt=null,at=null,nt=null,rt=null,lt=null,ct=null,it=null;oe&&oe.length>0&&(et=oe.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.display)})),de&&de.length>0&&(tt=de.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.display)})),be&&be.length>0&&(at=be.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.display)})),Oe&&Oe.length>0&&(nt=Oe.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.display)})),xe&&xe.length>0&&(rt=xe.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.display)})),Ie&&Ie.length>0&&(lt=Ie.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),Ae&&Ae.length>0&&(ct=Ae.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),ze&&ze.length>0&&(it=ze.map(function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(k.a,{className:He.cardBottom},r.a.createElement(I.a,null,r.a.createElement(z.a,{to:{pathname:"/",state:"users"}},r.a.createElement(E.a,{variant:"contained",color:"primary",className:" float-right ms-1",startIcon:r.a.createElement(F.a,null)},r.a.createElement("span",{style:{textTransform:"capitalize"}},"Back "))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"col-xl-12 col-lg-12"},r.a.createElement(b.a,{onSubmit:N(Ge,function(e){console.error(e)})},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},null===_e?"Basic Information":"Edit User Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"basic-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group mb-3 col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"dateOfRegistration"},"Date of Registration*"),r.a.createElement("input",Object.assign({className:"form-control",type:"date",name:"dateOfRegistration",id:"dateOfRegistration",max:C},l("dateOfRegistration"))),y.dateOfRegistration&&r.a.createElement("p",null,y.dateOfRegistration.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"patientId"},"Hospital Number* "),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"hospitalNumber",id:"hospitalNumber"},l("hospitalNumber"))),y.hospitalNumber&&r.a.createElement("p",null,y.hospitalNumber.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group mb-3 col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"firstName"},"First Name *"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"firstName",id:"firstName"},l("firstName"))),y.firstName&&r.a.createElement("p",null,y.firstName.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Middle Name"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"middleName",id:"middleName"},l("middleName"))),y.middleName&&r.a.createElement("p",null,y.middleName.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Last Name *"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"lastName",id:"lastName"},l("lastName"))),y.lastName&&r.a.createElement("p",null,y.lastName.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Sex *"),r.a.createElement("select",Object.assign({className:"form-control",name:"sex",id:"sex"},l("sex")),r.a.createElement("option",{value:""}),et),y.sex&&r.a.createElement("p",null,y.sex.message))),r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Employment Status *"),r.a.createElement("select",Object.assign({className:"form-control",name:"employmentStatus",id:"employmentStatus"},l("employmentStatus")),r.a.createElement("option",{value:""}),nt),y.lastName&&r.a.createElement("p",null,y.lastName.message))),r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Highest Qualification *"),r.a.createElement("select",Object.assign({className:"form-control",name:"highestQualification",id:"highestQualification"},l("highestQualification")),r.a.createElement("option",{value:""}),at),y.highestQualification&&r.a.createElement("p",null,y.highestQualification.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Marital Status"),r.a.createElement("select",Object.assign({className:"form-control",name:"maritalStatus",id:"maritalStatus"},l("maritalStatus")),r.a.createElement("option",{value:""}),tt),y.maritalStatus&&r.a.createElement("p",null,y.maritalStatus.message))),r.a.createElement("div",{className:"form-group mb-2 col-md-2"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Date Of Birth"),r.a.createElement("div",{className:"radio"},r.a.createElement("label",null,r.a.createElement("input",Object.assign({type:"radio",value:"Actual",name:"dateOfBirth",defaultChecked:!0},l("dateOfBirth"),{onChange:function(e){return $e(e)}}))," Actual")),r.a.createElement("div",{className:"radio"},r.a.createElement("label",null,r.a.createElement("input",Object.assign({type:"radio",value:"Estimated",name:"dateOfBirth"},l("dateOfBirth"),{onChange:function(e){return $e(e)}}))," Estimated")))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Date"),r.a.createElement("input",Object.assign({className:"form-control",type:"date",name:"dob",id:"dob",max:C},l("dob"),{onChange:function(e){return function(e){if(e.target.value){var t=new Date,a=new Date(e.target.value),n=t.getFullYear()-a.getFullYear(),r=t.getMonth()-a.getMonth();(r<0||0===r&&t.getDate()<a.getDate())&&n--,c("age",n)}else c("age",null)}(e)}})),y.dob&&r.a.createElement("p",null,y.dob.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Age"),r.a.createElement("input",Object.assign({className:"form-control",type:"number",name:"age",id:"age"},l("age"),{disabled:J,onChange:function(e){return function(e){if(!J&&e.target.value){var t=new Date;t.setDate(15),t.setMonth(5);var a=S(t.toISOString()).add(-1*e.target.value,"years");c("dob",Object(f.a)(new Date(a.toDate()),"yyyy-MM-dd"))}}(e)}})))))))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"Contact Details")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Phone Number *"),r.a.createElement("input",Object.assign({className:"form-control",type:"tel",name:"pnumber",id:"pnumber"},l("pnumber"),{placeholder:"(234)7099999999"})),y.pnumber&&r.a.createElement("p",null,y.pnumber.message))),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Alt. Phone Number"),r.a.createElement("input",Object.assign({className:"form-control",type:"tel",name:"altPhoneNumber",id:"altPhoneNumber"},l("altPhonenumber"),{placeholder:"(234)7099999999"})),y.altPhonenumber&&r.a.createElement("p",null,y.altPhonenumber.message))),r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Email"),r.a.createElement("input",Object.assign({className:"form-control",type:"email",name:"email",id:"email"},l("email"))),y.email&&r.a.createElement("p",null,y.email.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Country"),r.a.createElement("select",Object.assign({className:"form-control",type:"text",name:"country",id:"country"},l("countryId"),{onChange:function(e){return Xe(e)}}),r.a.createElement("option",{value:""}),lt),y.country&&r.a.createElement("p",null,y.country.message))),r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"State"),r.a.createElement("select",Object.assign({className:"form-control",type:"text",name:"stateId",id:"stateId"},l("stateId"),{onChange:function(e){return Ze(e)}}),r.a.createElement("option",{value:""}),ct))),r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Province/District/LGA"),r.a.createElement("select",Object.assign({className:"form-control",type:"text",name:"district",id:"district"},l("district")),r.a.createElement("option",{value:""}),it)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Street Address"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"address",id:"address"},l("address"))),y.address&&r.a.createElement("p",null,y.address.message))),r.a.createElement("div",{className:"form-group  col-md-4"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Landmark"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"landmark",id:"landmark"},l("landmark"))),y.landmark&&r.a.createElement("p",null,y.landmark.message)))))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"Relationship / Next Of Kin")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},G&&G.length>0&&r.a.createElement("div",{className:"col-xl-12 col-lg-12"},r.a.createElement("table",{style:{width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Relationship Type"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,G.map(function(e,t){return r.a.createElement("tr",{key:e.index},r.a.createElement("td",null,function(e){var t=xe.find(function(t){return t.id==e});return t?t.display:""}(e.relationshipId)),r.a.createElement("td",null,(l=e).surname+", "+l.firstname+" "+(l.otherName?l.otherName:"")),r.a.createElement("td",null,(n=e.contactPoint)?n.value:""),r.a.createElement("td",null,(a=e.address)&&a.line&&a.line.length>0?a.line[0]:""),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn btn-default btn-light btn-sm editRow",onClick:function(a){return function(e,t){c("relationshipType",e.relationshipId),c("cfirstName",e.firstname),c("cmiddleName",e.otherName),c("clastName",e.surname),c("contactPhoneNumber",e.contactPoint?e.contactPoint.value:""),c("contactAddress",e.address&&e.address.line&&e.address.line.length>0?e.address.line[0]:""),te(!0),le(t)}(e,t)}},r.a.createElement(O.a,{icon:"edit"})),"\xa0\xa0",r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm removeRow",onClick:function(e){return function(e){setTimeout(function(){G.splice(e,1),L(G),te(!0),te(!1)},500)}(t)}},r.a.createElement(O.a,{icon:"trash"}))));var a,n,l})))),r.a.createElement("div",{className:"col-xl-12 col-lg-12"},ee&&r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"relationshipType"},"Relationship Type *"),r.a.createElement("select",Object.assign({className:"form-control",name:"relationshipType",id:"relationshipType"},l("relationshipType")),r.a.createElement("option",{value:""}),rt),y.relationshipType&&r.a.createElement("p",null,y.relationshipType.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"cfirstName"},"First Name *"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"cfirstName",id:"cfirstName"},l("cfirstName"))),y.cfirstName&&r.a.createElement("p",null,y.cfirstName.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Middle Name"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"cmiddleName",id:"cmiddleName"},l("cmiddleName"))),y.cmiddleName&&r.a.createElement("p",null,y.cmiddleName.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,null,"Last Name *"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"clastName",id:"clastName"},l("clastName"))),y.clastName&&r.a.createElement("p",null,y.clastName.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"contactPhoneNumber"},"Phone Number"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"contactPhoneNumber",id:"contactPhoneNumber"},l("contactPhoneNumber"))),y.contactPhoneNumber&&r.a.createElement("p",null,y.contactPhoneNumber.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"contactEmail"},"Email"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"contactEmail",id:"contactEmail"},l("contactEmail"))),y.contactEmail&&r.a.createElement("p",null,y.contactEmail.message))),r.a.createElement("div",{className:"form-group mb-3 col-md-3"},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"contactAddress"},"Address"),r.a.createElement("input",Object.assign({className:"form-control",type:"text",name:"contactAddress",id:"contactAddress"},l("contactAddress"))),y.contactAddress&&r.a.createElement("p",null,y.contactAddress.message)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:""},r.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",className:He.button,onClick:function(e){var t=o("relationshipType"),a=o("cfirstName"),n=o("cmiddleName"),r=o("clastName"),l=o("contactPhoneNumber"),c=(o("contactEmail"),o("contactAddress"));if(t)if(a)if(r){var i={address:{line:[c]},contactPoint:{type:"phone",value:l},firstName:a,fullName:a+" "+n+" "+r,relationshipId:t,surname:r,otherName:n};null!=re?(G.splice(re,1),L(G.concat(i))):L(G.concat(i)),te(!1)}else d("clastName",{type:"custom",message:"LastName is required"},{shouldFocus:!0});else d("cfirstName",{type:"custom",message:"FirstName is required"},{shouldFocus:!0});else d("relationshipType",{type:"custom",message:"Relationship is required"},{shouldFocus:!0})}},"Add")),r.a.createElement("div",{className:""},r.a.createElement(E.a,{type:"button",variant:"contained",color:"secondary",className:He.button,onClick:function(){te(!1)}},"Cancel"))))))),r.a.createElement("div",{className:"row"},r.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",className:He.button,startIcon:r.a.createElement(A.a,null),onClick:function(){te(!0)}},"Add a Relative/Next Of Kin")))),Y?r.a.createElement(v.a,null):"",r.a.createElement("br",null),r.a.createElement(E.a,{type:"submit",variant:"contained",color:"primary",className:He.button,startIcon:r.a.createElement(T.a,null)},Y?r.a.createElement("span",{style:{textTransform:"capitalize"}},"Saving..."):r.a.createElement("span",{style:{textTransform:"capitalize"}},"Save")),r.a.createElement(E.a,{variant:"contained",className:He.button,startIcon:r.a.createElement(R.a,null),onClick:function(){Me.push("/")}},r.a.createElement("span",{style:{textTransform:"capitalize"}},"Cancel")))))))},L=a(6),W=a(163),Q=a(10),Y=(a(532),a(408)),U=a(542),K=a(543),J=a(544),X=a(546),Z=a(460),$=a(545),ee=a(979),te=a(951),ae=a(952),ne=a(16),re=a(947),le=a(948),ce=a(978),ie=a(949),oe=a(950),se=a(953),me=a(330),ue=a.n(me),de=a(973),pe=a(221),fe=a(222),Ee=a(989),be=a(991),ge=a(990),he=a(593),ve=a.n(he),Oe=a(992),Ne=Object(w.a)(function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},error:{color:"#f85032",fontSize:"12.8px"}}}),ye="",je=function(e){var t=Ne(),a=e.biometricDevices,l=Object(n.useState)({biometricType:"FINGERPRINT",patientId:e.patientId,templateType:"",device:""}),c=Object(u.a)(l,2),i=c[0],o=c[1],s=Object(n.useState)([]),m=Object(u.a)(s,2),d=m[0],f=m[1],v=Object(n.useState)(e.biometricDevices),O=Object(u.a)(v,2),N=(O[0],O[1],r.a.useState(!1)),y=Object(u.a)(N,2),j=y[0],x=y[1],S=r.a.useState(!1),w=Object(u.a)(S,2),k=w[0],I=w[1],C=r.a.useState(!1),P=Object(u.a)(C,2),A=P[0],D=P[1],R=r.a.useState(!1),z=Object(u.a)(R,2),F=z[0],_=z[1],q=Object(n.useState)({}),V=Object(u.a)(q,2),G=V[0],Q=V[1],Y=Object(n.useState)([]),U=Object(u.a)(Y,2),K=U[0],J=U[1];console.log(a);var X=Object(W.a)({},F&&{bgcolor:pe.a[500],"&:hover":{bgcolor:pe.a[700]}});Object(n.useEffect)(function(){Z(),""===i.device&&I(!1)},[]);var Z=function(){p.a.get("".concat(M,"application-codesets/v2/BIOMETRIC_CAPTURE_FINGERS"),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){f(e.data)}).catch(function(e){})};return r.a.createElement("div",null,r.a.createElement(re.a,null,r.a.createElement(le.a,null,r.a.createElement(ce.a,{isOpen:e.modalstatus,toggle:e.togglestatus,className:e.className,size:"lg"},r.a.createElement(b.a,null,r.a.createElement(ie.a,{toggle:e.togglestatus},"capture Biometric"),r.a.createElement(oe.a,null,r.a.createElement(re.a,null,r.a.createElement(le.a,null,r.a.createElement(te.a,{form:!0},r.a.createElement(B.a,null),r.a.createElement(ae.a,{md:4},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"device"},"Select Device "),r.a.createElement(se.a,{type:"select",name:"device",id:"device",onChange:function(e){var t=e.target.value,n=a.find(function(e){return e.name===t});ye=null===n.url?M:n.url,console.log(ye),o(Object(W.a)({},i,{device:t})),p.a.get("".concat(ye,"biometrics/secugen/boot?reader=").concat(t),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){"ERROR"===e.data.errorType?B.b.error(e.data.errorName+" is not plug"):I(!0)}).catch(function(e){})},value:i.device,required:!0},r.a.createElement("option",{value:""},"Select Device "),a.map(function(e){var t=e.id,a=e.name;return r.a.createElement("option",{key:t,value:a},a)})),""!==G.device?r.a.createElement("span",{className:t.error},G.device):"")),k?r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{md:4},r.a.createElement(g.a,null,r.a.createElement(h.a,{for:"device"},"Select Finger"),r.a.createElement(se.a,{type:"select",name:"templateType",id:"templateType",onChange:function(e){o(Object(W.a)({},i,Object(L.a)({},e.target.name,e.target.value)))},value:i.templateType,required:!0},r.a.createElement("option",{value:""},"Select Finger "),d.map(function(e){return r.a.createElement("option",{key:e.id,value:e.display},e.display)})),""!==G.templateType?r.a.createElement("span",{className:t.error},G.templateType):"")),r.a.createElement(ae.a,{md:4},r.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),function(){var e=Object(W.a)({},G);return e.templateType=i.templateType?"":"This field is required",e.device=i.device?"":"This field is required",Q(Object(W.a)({},e)),Object.values(e).every(function(e){return""==e})}()&&p.a.post("".concat(ye,"biometrics/secugen/enrollment?reader=SG_DEV_AUTO"),i,{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){if(x(!0),"ERROR"===e.data.type)x(!1),D(!0),window.setTimeout(function(){D(!1)},5e3),B.b.error(e.data.message.ERROR);else{var t=e.data.templateType;D(!1),_(!0),window.setTimeout(function(){_(!1),x(!1)},5e3),J([].concat(Object(ne.a)(K),[e.data])),d.splice(t,1),f(Object(ne.a)(d))}}).catch(function(e){})},className:"mt-4",startIcon:r.a.createElement(ue.a,null)},"Capture Finger")),r.a.createElement("br",null)):"",r.a.createElement(ae.a,{sm:"12",md:{size:6,offset:3}},j&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{sx:{display:"flex",alignItems:"center"}},r.a.createElement(Ee.a,{sx:{m:1,position:"relative"}},r.a.createElement(ge.a,{"aria-label":"save",color:"secondary",sx:X},F?r.a.createElement(ve.a,null):r.a.createElement(ue.a,null)),j&&r.a.createElement(be.a,{size:68,sx:{color:pe.a[500],position:"absolute",top:-6,left:-6,zIndex:1}})),r.a.createElement(Oe.a,{variant:"h6",gutterBottom:!0,component:"div"},F?" your  ".concat(i.templateType," Finger captured."):"Please place your  ".concat(i.templateType," Finger on scanner.")))),A&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{sx:{display:"flex",alignItems:"center"}},r.a.createElement(Ee.a,{sx:{m:1,position:"relative"}},r.a.createElement(ge.a,{"aria-label":"save",color:"secondary",sx:X},r.a.createElement(ue.a,null)),A&&r.a.createElement(be.a,{size:68,sx:{color:fe.a[500],position:"absolute",top:-6,left:-6,zIndex:1}})),r.a.createElement(Oe.a,{variant:"h6",gutterBottom:!0,component:"div"},"Click to Recapture Again"))))),r.a.createElement(te.a,null,K.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{md:12},r.a.createElement("h3",null,"Captured Fingerprints")),r.a.createElement(ae.a,{md:12,style:{marginTop:"20px"}},r.a.createElement(de.a,{celled:!0,horizontal:!0},K.map(function(e){return r.a.createElement(de.a.Item,null,r.a.createElement(de.a.Content,null," ",r.a.createElement(ue.a,{style:{color:"#2E7D32",fontSize:40}}),e.templateType))}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ae.a,{md:12},r.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",onClick:function(t){if(t.preventDefault(),K.length>1){var a=K[K.length-1];p.a.post("".concat(M,"biometrics/templates"),a,{headers:{Authorization:"Bearer ".concat(H)}}).then(function(t){B.b.success("Biometric save successful"),J([]),e.setPatientBiometricStatus(!0),e.togglestatus()}).catch(function(e){B.b.error("Something went wrong")})}else B.b.error("You can't save less than 2 finger")},startIcon:r.a.createElement(T.a,null)},"Save Capture"))):"")))))))))};var xe=Object(Q.a)(function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}})(function(e){var t=e.classes,a=e.patientObj?e.patientObj:{},l=e.permissions?e.permissions:[],c=Object(n.useState)(!1),i=Object(u.a)(c,2),o=i[0],s=i[1],m=Object(n.useState)(e.patientObj.biometricStatus),d=Object(u.a)(m,2),f=d[0],E=d[1],b=Object(n.useState)(!1),g=Object(u.a)(b,2),h=g[0],v=g[1],O=Object(n.useState)([]),N=Object(u.a)(O,2),y=N[0],j=N[1];Object(n.useEffect)(function(){S()},[]);var x,S=function(){p.a.get("".concat(M,"modules/check?moduleName=biometric"),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){v(e.data),!0===e.data&&p.a.get("".concat(M,"biometrics/devices"),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){j(e.data)}).catch(function(e){console.log(e)})}).catch(function(e){})};return r.a.createElement("div",{className:t.root},r.a.createElement(U.a,{defaultExpanded:!0},r.a.createElement(K.a,null,r.a.createElement(te.a,null,r.a.createElement(ae.a,{md:11},r.a.createElement(te.a,{className:"mt-1"},r.a.createElement(ae.a,{md:12,className:t.root2},r.a.createElement("b",{style:{fontSize:"25px"}},a.surname+", "+a.firstName+" "+a.otherName)),r.a.createElement(ae.a,{md:4,className:t.root2},r.a.createElement("span",null," ","Hospital Number : ",r.a.createElement("b",null,function(e){var t=e.identifier.find(function(e){return"HospitalNumber"==e.type});return t?t.value:""}(a.identifier)))),r.a.createElement(ae.a,{md:4,className:t.root2},r.a.createElement("span",null,"Date Of Birth : ",r.a.createElement("b",null,a.dateOfBirth))),r.a.createElement(ae.a,{md:4,className:t.root2},r.a.createElement("span",null," ","Age : ",r.a.createElement("b",null,function(e){var t=new Date,a=(e.split("-"),new Date(e)),n=t.getFullYear()-a.getFullYear(),r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&n--,0===n?r+" month(s)":n+" year(s)"}(a.dateOfBirth)))),r.a.createElement(ae.a,{md:4},r.a.createElement("span",null," ","Gender :"," ",r.a.createElement("b",null,a.gender.display)),r.a.createElement(Y.a,{color:"green",size:"mini"},"Patient Status",r.a.createElement(Y.a.Detail,null,"Active"))),r.a.createElement(ae.a,{md:4,className:t.root2},r.a.createElement("span",null," ","Phone Number : ",r.a.createElement("b",null,function(e){var t=e.contactPoint.find(function(e){return"phone"==e.type});return t?t.value:""}(a.contactPoint)))),r.a.createElement(ae.a,{md:4,className:t.root2},r.a.createElement("span",null," ","Address : ",r.a.createElement("b",null,(x=a.address)&&x.address&&x.address.length>0?x.address[0].city:null," "))))))),r.a.createElement(J.a,{className:t.details},r.a.createElement("div",{className:t.column},r.a.createElement(ee.a,{color:"red",content:"BloodType",label:{basic:!0,color:"red",pointing:"left",content:"AB+"}})),r.a.createElement("div",{className:t.column},r.a.createElement(ee.a,{basic:!0,color:"blue",content:"Height",icon:"fork",label:{as:"a",basic:!0,color:"blue",pointing:"left",content:"74.5 in"}})),r.a.createElement("div",{className:t.column},r.a.createElement(ee.a,{basic:!0,color:"blue",content:"Weight",icon:"fork",label:{as:"a",basic:!0,color:"blue",pointing:"left",content:"74.5 in"}})),!0===h?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Z.a,{variant:"caption"},r.a.createElement(Y.a,{color:!0===f?"green":"red",size:"mini"},"Biometric Status",r.a.createElement(Y.a.Detail,null,!0===f?"Captured":"Not Capture")),!0!==f?r.a.createElement(r.a.Fragment,null,l.includes("patient_check_in")||l.includes("all_permission")?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{as:"a",color:"teal",onClick:function(){return a.id,void s(!o)},tag:!0},"Capture Now")):""):""))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Z.a,{variant:"caption"},r.a.createElement(Y.a,{color:"red",size:"mini"},"Biometric Not Install"))))),r.a.createElement($.a,null),r.a.createElement(X.a,null)),r.a.createElement(je,{modalstatus:o,togglestatus:function(){return s(!o)},patientId:a.id,biometricDevices:y,setPatientBiometricStatus:E}))}),Se=a(971),we=a(967),ke=a(974),Ie=a(167),Ce=a.n(Ie),Te=a(977),Pe=a(998),Ae=a(999),De=a(986),Re=a(996),Be=a(988),ze=a(994),Fe=a(981),_e=a(316),He=a.n(_e),Me=a(975),qe=a(597),Ve=a.n(qe),Ge=a(598),Le=a.n(Ge),We=r.a.createElement(Ve.a,{fontSize:"small"}),Qe=r.a.createElement(Le.a,{fontSize:"small"}),Ye=[{field:"id",headerName:"ID",width:90},{field:"firstName",headerName:"First name",width:150,editable:!0},{field:"lastName",headerName:"Last name",width:150,editable:!0},{field:"age",headerName:"Age",type:"number",width:110,editable:!0}],Ue=[],Ke=new Date;var Je=Object(Q.a)(function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"20.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(1),"px ").concat(2*e.spacing(1),"px")},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}})(function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),l=a[0],c=(a[1],Object(i.g)()),o=e.classes,d=c.location&&c.location.state?c.location.state.patientObj:{},b=c.location&&c.location.state?c.location.state.permissions:[],g=Object(_.e)(),h=(g.handleSubmit,g.control,Object(n.useState)(!1)),v=Object(u.a)(h,2),O=v[0],N=v[1],y=Object(n.useState)(!1),j=Object(u.a)(y,2),x=j[0],S=j[1],w=Object(n.useState)(!1),k=Object(u.a)(w,2),I=k[0],C=k[1],T=Object(n.useState)([]),P=Object(u.a)(T,2),A=P[0],D=P[1],R=Object(n.useState)({checkInServices:""}),F=Object(u.a)(R,2),q=F[0],V=F[1],G=Object(n.useState)([]),L=Object(u.a)(G,2),Q=L[0],U=L[1],K=Object(n.useState)({facilityId:1,personId:"",visitEndDate:Object(f.a)(new Date(Ke),"yyyy-MM-dd"),visitStartDate:""}),J=Object(u.a)(K,2),X=(J[0],J[1],Object(n.useState)({serviceIds:"",visitDto:{facilityId:1,personId:d.id,visitEndDate:"",visitStartDate:Object(f.a)(new Date(Ke),"yyyy-MM-dd")}})),Z=Object(u.a)(X,2),$=Z[0],ee=(Z[1],Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"patient/post-service"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,D(t.data),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred fetching services!"});case 11:case"end":return e.stop()}},e,null,[[0,7]])})),[])),te=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"patient/visit/visit-detail/").concat(d.id),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,U(t.data),t.data.map(function(e){null===e.checkOutDate&&S(!0)}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred fetching services!"});case 12:case"end":return e.stop()}},e,null,[[0,8]])})),[]);Object(n.useEffect)(function(){ee(),te()},[ee,te]),A&&A.length>0&&A.map(function(e,t){return r.a.createElement(Te.a,{key:e.moduleServiceCode,value:e.moduleServiceCode},e.moduleServiceName)});var ae=[{menuItem:"Patient Visit",render:function(){return r.a.createElement(Se.a.Pane,null,r.a.createElement(He.a,{title:"",columns:[{title:"Checked In Date",field:"checkInDate",filtering:!1},{title:"Check Out Date",field:"checkOutDate",filtering:!1},{title:"Service",field:"service",filtering:!1},{title:"Status",field:"status",filtering:!1}],isLoading:l,data:Q.map(function(e){return{checkInDate:e.checkInDate,checkOutDate:e.checkOutDate,service:e.service,status:r.a.createElement(Y.a,{color:"COMPLETED"===e.status?"green":"red",size:"mini"},e.status)}}),options:{headerStyle:{backgroundColor:"#000",color:"#ffffff"},search:!0,filtering:!1,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400}}))}},{menuItem:b.includes("view_patient_appointment")||b.includes("all_permission")?"Appointments":"",render:function(){return b.includes("view_patient_appointment")||b.includes("all_permission")?r.a.createElement(Se.a.Pane,null,r.a.createElement("div",{style:{height:400,width:"100%"}},r.a.createElement(we.a,{rows:Ue,columns:Ye,pageSize:5,rowsPerPageOptions:[5],checkboxSelection:!0,disableSelectionOnClick:!0}))):""}}],ne=function(){N(!1)},re=function(){C(!1)},le=[];return r.a.createElement("div",{className:o.root},r.a.createElement(Pe.a,null,r.a.createElement(Ae.a,null,r.a.createElement(xe,{patientObj:d,permissions:b}),r.a.createElement(Pe.a,null,r.a.createElement(Ae.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mb-3 col-md-3"},"\xa0"),r.a.createElement("div",{className:"mb-3 col-md-3"},"\xa0"),r.a.createElement("div",{className:"mb-3 col-md-3"},"\xa0"),r.a.createElement("div",{className:"mb-3 col-md-3"},r.a.createElement(z.a,{to:"/"},r.a.createElement(E.a,{variant:"contained",color:"primary",className:" float-right mr-1"},r.a.createElement("span",{style:{textTransform:"capitalize"}},"Back"))),b.includes("patient_check_in")||b.includes("all_permission")?r.a.createElement(r.a.Fragment,null,!1===x?r.a.createElement(De.a,{variant:"contained",style:{backgroundColor:"black"},onClick:function(){N(!0)},className:" float-right mr-1"},r.a.createElement("span",{style:{textTransform:"capitalize"}},"CheckIn")):""):"",!0===x?r.a.createElement(De.a,{variant:"contained",style:{backgroundColor:"black"},onClick:function(){C(!0)},className:" float-right mr-1"},r.a.createElement("span",{style:{textTransform:"capitalize"}},"CheckOut")):"")),r.a.createElement(Se.a,{panes:ae}))))),r.a.createElement(ce.a,{isOpen:O,toggle:ne},r.a.createElement(ie.a,{toggle:ne},"Select a Service Area"),r.a.createElement(oe.a,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q.checkInServices.length>0&&q.checkInServices.map(function(e){null!==e.id&&(le.push(e.id),console.log(e))}),$.serviceIds=le,p.a.post("".concat(M,"patient/visit/checkin"),$,{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){B.b.success("Patient Check-In successful"),S(!0),ne(),te()}).catch(function(e){console.log(e),B.b.error("Something went wrong"),ne()})}},r.a.createElement(Re.a,{style:{display:"grid",gridRowGap:"20px",padding:"20px",margin:"10px 10px"}},r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:8},r.a.createElement(ze.a,null,r.a.createElement(Me.a,{multiple:!0,id:"checkboxes-tags-demo",options:A,getOptionLabel:function(e){return e.moduleServiceName},onChange:function(e,t){console.log(t),V(Object(W.a)({},q,{checkInServices:t}))},renderOption:function(e,t,a){var n=a.selected;return r.a.createElement("li",e,r.a.createElement(ke.a,{icon:We,checkedIcon:Qe,style:{marginRight:8},checked:n}),t.moduleServiceName)},style:{width:400},renderInput:function(e){return r.a.createElement(Fe.a,Object.assign({},e,{label:"Services"}))}})))),r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:12},r.a.createElement(De.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))))))),r.a.createElement(ce.a,{isOpen:I,toggle:re},r.a.createElement(ie.a,{toggle:re},"CheckOut "),r.a.createElement(oe.a,null,r.a.createElement("form",null,r.a.createElement(Re.a,{style:{display:"grid",gridRowGap:"20px",padding:"20px",margin:"10px 10px"}},r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:12},r.a.createElement("h5",null,"Are you sure you want to check-out patient?"))),r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:12},r.a.createElement(De.a,{type:"submit",onClick:function(e){e.preventDefault();var t=Q.find(function(e){return"PENDING"===e.status});p.a.put("".concat(M,"patient/visit/checkout/").concat(t.id),t.id,{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){B.b.success("Record save successful"),S(!1),re(),te()}).catch(function(e){console.log(e),B.b.error("Something went wrong"),re()})},variant:"contained",color:"primary"},"Yes"))))))))}),Xe=a(966),Ze=a(613),$e=a(425),et=a(223),tt=(a(873),a(874),a(600)),at=a.n(tt),nt=a(610),rt=a.n(nt),lt=a(601),ct=a.n(lt),it=a(608),ot=a.n(it),st=a(486),mt=a.n(st),ut=a(485),dt=a.n(ut),pt=a(602),ft=a.n(pt),Et=a(603),bt=a.n(Et),gt=a(605),ht=a.n(gt),vt=a(606),Ot=a.n(vt),Nt=a(607),yt=a.n(Nt),jt=a(611),xt=a.n(jt),St=a(604),wt=a.n(St),kt=a(609),It=a.n(kt),Ct=a(612),Tt=a.n(Ct),Pt={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(at.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(mt.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(bt.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(ht.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Ot.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(yt.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(mt.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(ot.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(It.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement(rt.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(xt.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(Tt.a,Object.assign({},e,{ref:t}))})},At=(Object(w.a)(function(e){return{card:{margin:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},cardBottom:{marginBottom:20},Select:{height:45,width:350},button:{margin:e.spacing(1)},root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},error:{color:"#f85032",fontSize:"11px"},success:{color:"#4BB543 ",fontSize:"11px"}}}),function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),o=Object(u.a)(i,2),d=o[0],f=o[1],b=Object(n.useState)(""),g=Object(u.a)(b,2),h=g[0],v=(g[1],Object(n.useState)(!1)),O=Object(u.a)(v,2),N=O[0],y=O[1],j=Object(n.useState)(!1),x=Object(u.a)(j,2),S=x[0],w=x[1];Object(n.useEffect)(function(){k()},[]);var k=function(){p.a.get("".concat(M,"account"),{headers:{Authorization:"Bearer ".concat(H)}}).then(function(e){f(e.data.permissions)}).catch(function(e){})},I=Object(n.useCallback)(Object(m.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(M,"patient"),{headers:{Authorization:"Bearer ".concat(H)}});case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),[]),C=function(){var e=Object(m.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,p.a.delete("".concat(M,"patient/").concat(t),{headers:{Authorization:"Bearer ".concat(H)}});case 4:e.sent,window.location.reload();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),T=function(){y(!1)},P=function(e){var t=new Date,a=(e.split("-"),new Date(e)),n=t.getFullYear()-a.getFullYear(),r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&n--,0===n?r+" month(s)":n+" year(s)"},A=function(e){var t=e.identifier.find(function(e){return"HospitalNumber"==e.type});return t?t.value:""};return Object(n.useEffect)(function(){I()},[I]),console.log(d),console.log(d.includes("all_permission")),r.a.createElement("div",null,r.a.createElement(B.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(re.a,null,r.a.createElement(le.a,null,d.includes("view_patient")||d.includes("all_permission")?r.a.createElement(z.a,{to:"register-patient"},r.a.createElement(E.a,{variant:"contained",color:"primary",className:" float-right mr-1",startIcon:r.a.createElement(Ze.a,{size:"10"})},r.a.createElement("span",{style:{textTransform:"capitalize"}},"New Patient"))):"",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(He.a,{icons:Pt,title:"Find patients",columns:[{title:"Patient Name",field:"name"},{title:"Patient ID",field:"id"},{title:"Gender",field:"gender"},{title:"Date Of Birth",field:"dateOfBirth",filtering:!1},{title:"Age",field:"age",filtering:!1},{title:"Address",field:"address",filtering:!1},{title:"Status",field:"status",filtering:!1},{title:"Actions",field:"actions",filtering:!1}],isLoading:h,data:l.map(function(e){return{name:e.firstName+" "+e.otherName+" "+e.surname,id:A(e.identifier),gender:(a=e.gender,a.display),dateOfBirth:e.dateOfBirth,age:0===e.dateOfBirth||void 0===e.dateOfBirth||null===e.dateOfBirth||""===e.dateOfBirth?0:P(e.dateOfBirth),address:(t=e.address,t&&t.address&&t.address.length>0?t.address[0].city:null),status:e.active?r.a.createElement(Y.a,{color:"green",size:"mini"},"active"):r.a.createElement(Y.a,{color:"teal",size:"mini"},"not-active"),actions:r.a.createElement("div",null,r.a.createElement(et.a,null,r.a.createElement(et.b,{style:{backgroundColor:"#3F51B5",color:"#fff",border:"2px solid #3F51B5",borderRadius:"4px"}},"Actions ",r.a.createElement("span",{"aria-hidden":!0},"\u25be")),r.a.createElement(et.d,{className:"menuClass"},d.includes("view_patient")||d.includes("all_permission")?r.a.createElement(et.c,{style:{color:"#000 !important"}},r.a.createElement(z.a,{to:{pathname:"/patient-dashboard",state:{patientObj:e,permissions:d}}},r.a.createElement($e.a,{size:"15"})," ",r.a.createElement("span",{style:{color:"#000"}},"Patient Dashboard"))):"",d.includes("edit_patient")||d.includes("all_permission")?r.a.createElement(et.c,{style:{color:"#000 !important"}},r.a.createElement(z.a,{to:{pathname:"/register-patient",state:{patientId:e.id}}},r.a.createElement($e.c,{size:"15"})," ",r.a.createElement("span",{style:{color:"#000"}},"Edit Patient "))):"",d.includes("delete_patient")||d.includes("all_permission")?r.a.createElement(et.c,{style:{color:"#000 !important"}},r.a.createElement(z.a,{onClick:function(t){return function(e){var t=l.find(function(t){return t.id==e});w(t),y(!N)}(e.id)},to:{pathname:"/#",currentId:e}},r.a.createElement($e.b,{size:"15"})," ",r.a.createElement("span",{style:{color:"#000"}},"Delete Patient"))):"")))};var t,a}),options:{headerStyle:{color:"#000"},searchFieldStyle:{width:"200%",margingLeft:"250px"},filtering:!0,exportButton:!1,searchFieldAlignment:"left",pageSizeOptions:[10,20,100],pageSize:10,debounceInterval:400}}))),r.a.createElement(ce.a,{isOpen:N,toggle:T},r.a.createElement(ie.a,{toggle:T},"Delete Patient"),r.a.createElement(oe.a,null,"Are you sure to delete this record? ",S?S.surname+", "+S.firstname+" "+S.otherName:""),r.a.createElement(Xe.a,null,r.a.createElement(E.a,{color:"primary",type:"button",onClick:function(e){return C(S.id)}},"Yes")," ",r.a.createElement(E.a,{color:"secondary",type:"button",onClick:function(e){return T()}},"No"))))}),Dt=a(614),Rt=a.n(Dt),Bt=[{field:"weight",headerName:"Weight",width:200,editable:!1},{field:"height",headerName:"Height",width:200,editable:!1},{field:"temperature",headerName:"Temperature",width:200,editable:!1},{field:"status",headerName:"Status",width:200,editable:!1}],zt=function(){return r.a.createElement(Pe.a,null,r.a.createElement(Ae.a,null,r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:3},"\xa0"),r.a.createElement(Be.a,{item:!0,xs:3},"\xa0"),r.a.createElement(Be.a,{item:!0,xs:3},"\xa0"),r.a.createElement(Be.a,{item:!0,xs:3},r.a.createElement(Ee.a,{m:1,display:"flex",justifyContent:"center",alignItems:"center"},r.a.createElement(z.a,{to:{pathname:"/add-patient-vital"}},r.a.createElement(De.a,{variant:"contained",style:{backgroundColor:"black"}},r.a.createElement(Rt.a,null)," Add Vital Signs"))))),r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:12},r.a.createElement(Ee.a,{height:"200px"},r.a.createElement(we.a,{rows:[],columns:Bt,pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0}))))))},Ft=a(615),_t=a(969),Ht=a(968),Mt=function(){var e=Object(_.e)(),t=e.handleSubmit,a=e.control,n=function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={bodyWeight:t.Weight,diastolic:t.Diastolic,encounterDate:t.DateOfVitalSigns,height:t.Height,personId:1,systolic:t.Systolic},e.next=4,p.a.post("".concat(M,"patient/vital-sign"),a,{headers:{Authorization:"Bearer ".concat(H)}});case 4:return e.next=6,Ce.a.fire({icon:"success",text:"Add Patient Vital successfully",timer:1500});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Ce.a.fire({icon:"error",title:"Oops...",text:"An error occurred while saving patient vitals!"});case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Pe.a,null,r.a.createElement(Ae.a,null,r.a.createElement("form",{onSubmit:t(n,function(){})},r.a.createElement(Re.a,{style:{display:"grid",gridRowGap:"20px",padding:"20px",margin:"10px 10px"}},r.a.createElement(Oe.a,{variant:"h6"},"Take Patient Vitals"),r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(Ft.a,{dateAdapter:_t.a},r.a.createElement(_.a,{name:"DateOfVitalSigns",control:a,defaultValue:null,render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Ht.a,{renderInput:function(e){return r.a.createElement(Fe.a,e)},label:"Date Of Vital Signs",selected:n,value:n,onChange:a,error:!!l,helperText:l?l.message:null})}})))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"Pulse",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Pulse(bpm)",id:"Pulse",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}}))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"RespiratoryRate",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Respiratory Rate (bpm)",id:"RespiratoryRate",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}}))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"Temperature",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Temperature (C)",id:"Temperature",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}}))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"Systolic",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Systolic (mmHg)",id:"Systolic",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}}))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"Diastolic",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Diastolic (mmHg)",id:"Diastolic",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}}))))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"Weight",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Weight (Kg)",id:"Weight",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}}))),r.a.createElement(Be.a,{item:!0,xs:6},r.a.createElement(ze.a,{fullWidth:!0},r.a.createElement(_.a,{name:"Height",control:a,defaultValue:"",render:function(e){var t=e.field,a=t.onChange,n=t.value,l=e.fieldState.error;return r.a.createElement(Fe.a,{label:"Height (cm)",id:"Height",variant:"outlined",value:n,onChange:a,error:!!l,helperText:l?l.message:null})}})))),r.a.createElement(Be.a,{container:!0,spacing:2},r.a.createElement(Be.a,{item:!0,xs:12},r.a.createElement(De.a,{type:"button",variant:"contained",color:"error"},"Cancel"),"\xa0\xa0",r.a.createElement(De.a,{type:"submit",variant:"contained",color:"primary"},"Submit")))))))};function qt(){return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(B.a,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/register-patient"},r.a.createElement(Gt,null)),r.a.createElement(i.b,{path:"/patient-dashboard"},r.a.createElement(Vt,null)),r.a.createElement(i.b,{path:"/patient-vitals"},r.a.createElement(Lt,null)),r.a.createElement(i.b,{path:"/add-patient-vital"},r.a.createElement(Wt,null)),r.a.createElement(i.b,{path:"/"},r.a.createElement(At,null)))))}function Vt(){return r.a.createElement(Je,null)}function Gt(){return r.a.createElement(G,null)}function Lt(){return r.a.createElement(zt,null)}function Wt(){return r.a.createElement(Mt,null)}a(875);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qt,null)),document.getElementById("root"))}},[[666,1,2]]]);
//# sourceMappingURL=main.562b9f0a.chunk.js.map